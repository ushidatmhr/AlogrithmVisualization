<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no" />
<link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
<link rel="stylesheet" type="text/css" href="/AlogrithmVisualization/css/style.css?_1497885893540" />
<script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/4.5.1/pixi.min.js"></script>
<script type="text/javascript" src="/AlogrithmVisualization/js/script.js?_1497885893540"></script>
    <title>バブルソート - buble sort</title>
    <script>
        window.onload = function() {
            sort = new BubleSort('pixi-area', function() {
                SortUI.autoSwitch(false);
            });

            var dataNum = window.sessionStorage.getItem('data-num');
            if (!dataNum) {
                dataNum = 10;
            }

            document.getElementById('data-num').value = dataNum;
            sort.init(dataNum);

        }
    </script>
</head>
<body>
  
    <header class="head">
    <h1 class="title">
        <a href="/AlogrithmVisualization/">Algorithm Visualization</a>
    </h1>
</header>

    <main>
        <section>
        
            <div id="pixi-area">
        
            </div>
        </section>

        <section>
            <div class="cmds">
                <button id="next" class="btn btn-cmd" onclick="SortUI.next()">Next</button>
                <button id="auto" class="btn btn-cmd" value="on" onclick="SortUI.autoSwitch()">
                    <i class="fa fa-play" aria-hidden="true"></i> Auto
                </button>
                <button id="reset" class="btn btn-cmd" onclick="SortUI.reset()">Reset</button>
            </div>
        </section>
        
        <section class="section-datanum" style="margin-top: 20px; text-align: center;">
            データ数：
            <button class="counter count-num" onclick="SortUI.counter(-10)">-10</button>
            <button class="counter" onclick="SortUI.counter(-1)">-</button>
            <input type="text" id="data-num" value="10" class="data-num" readonly />
            <button class="counter" onclick="SortUI.counter(1)">+</button>
            <button class="counter count-num" onclick="SortUI.counter(10)">+10</button>
        </section>

        <section class="section-datanum" style="margin-top: 20px;">
            速度：
            <label class="speed-togggle active">
                <input type="radio" value="1" name="speed" onchange="SortUI.speed(this)" checked/>×1
            </label>
            <label class="speed-togggle">
                <input type="radio" value="10" name="speed" onchange="SortUI.speed(this)" />×10
            </label>
            <label class="speed-togggle">
                <input type="radio" value="100" name="speed" onchange="SortUI.speed(this)" />×100
            </label>
        </section>

        <script>
            var SortUI = {

                _dataNumTxt: document.getElementById('data-num'),
                _autoBtn: document.getElementById('auto'),
                _speedBtn: document.getElementsByName('speed'),

                next: function() {
                    if (sort.app.ticker.started) {
                        return;
                    }

                    sort.update();
                },

                counter: function(addNum) {
                    var num = Number(this._dataNumTxt.value);

                    num += Number(addNum);

                    if (num <= 1) {
                        num = 2;
                    } else if (200 < num) {
                        num = 200;
                    }

                    this._dataNumTxt.value = num;
                    window.sessionStorage.setItem('data-num', num);


                    this.reset();
                },

                autoSwitch: function() {
                    if (this._autoBtn.value == 'on') {
                        this._autoBtn.innerHTML = '<i class="fa fa-pause" aria-hidden="true"></i> Auto';
                        this._autoBtn.value = 'off';

                        for (var speedRadio of this._speedBtn) {
                            if (speedRadio.checked) {
                                sort.speed = speedRadio.value;
                            }
                        }

                        sort.auto(true);
                    } else {
                        this._autoBtn.innerHTML = '<i class="fa fa-play" aria-hidden="true"></i> Auto';
                        this._autoBtn.value = 'on';
                        sort.auto(false);
                    }
                },

                reset: function() {
                    sort.reset(this._dataNumTxt.value);
                },

                speed: function(radio) {

                    for (var speedRadio of this._speedBtn) {
                        if (speedRadio.checked) {
                            speedRadio.parentNode.classList.add('active');
                        } else {
                            speedRadio.parentNode.classList.remove('active');
                        }
                    }

                    sort.speed = radio.value;
                }

            }
        </script>
    </main>
  
</body>
</html>